#!/usr/bin/env python
'''
Leetcode: Valid palindrome

Given a string, determine if it is a palindrome, considering only alphanumeric characters and ignoring cases.
For example,
"A man, a plan, a canal: Panama" is a palindrome.
"race a car" is not a palindrome.

Note: Have you consider that the string might be empty? This is a good question to ask during an interview. For the purpose of this problem, we define empty string as valid palindrome.
'''
from __future__ import division
import sys, random

# ~O(n)
def valid_palin(s):
    n = len(s)
    if n == 0: return True
    i, j = 0, n-1
    while i < j:
        while not s[i].isalpha(): i += 1
        while not s[j].isalpha(): j -= 1
        if s[i].lower() != s[j].lower(): return False
        else: i += 1; j -= 1
    return True



if __name__ == '__main__':
    print valid_palin("A man, a plan, a canal: Panama")
    print valid_palin("race a car")
    print valid_palin("")
    print valid_palin("A man, a plan, a casa, a bait, a lag, a malt, an ami, an abr, a bayard, a liang, an apa, a jager, an adder, a gaw, a nut, an oca, a net, a caps, a rail, a karat, an amalaka, an agron, a brev, a kit, a ballet, an eel, a bar, a lama, a dan, a patina, a grama, a tin, a manak, a japer, a pupa, an oka, a lev, a trad, a cab, an ala, a papaya, a loma, a cam, a catalpa, a mon, a kor, a tam, a haloid, a regal, a lub, a war, a peen, a stob, a gad, a spin, a ward, a slag, a toom, a we'd, a pos, a marg, a cedar, a daraf, a wat, a dater, a carapa, a lot, a tennis, a laic, a farer, a dame, a haemin, an agal, a tsar, a misaim, an enate, a halo, a garrot, a gip, a rom, a lca, an elem, a yell, a ganoin, a waver, a boma, a ball, a waxer, a tid, an agr, an app, a y-axis, a lion, a lack, a burg, a motmot, a rata, a vil, a satrap, a mart, a rank, a lex, an annot, a pol, a tael, a drub, a nome, a dale, a batwoman, a mara, a lob, a tarp, a res, a drawer, a rot, a doh, a nib, a saw, a harem, a gater, an imam, a llama, a let, a bel, a hamal, a gasser, a cadi, a ramrod, a saga, a bass, a cad, a ya-ta-ta, a flan, a cig, a malam, an anus, a keep, a cuda, a crum, an alapa, a doc, a nett, a laggen, a loofa, a cola, a roman, a vac, a snug, a mass, an ass, a tarpan, a frt, a neb, a reel, a corp, a yob, an ana, a but, a tpd, a pant, a cate, an alb, a napper, a gum, a knot, a daud, a pipa, a ruse, a call, a haar, a matador, a bot, a mod, a cor, an aug, a dop, a bud, a buran, a sika, a nork, a yoga, a kip, a rood, a tanga, a pap, a loop, a rein, a pat, an anadem, a leman, a brocatel, a says, a jad, a nomad, a tau, a nunatak, a drab, a gob, an amt, an andron, an orc, a maim, a kaiak, a saber, a puca, a rab, a rabal, a kabala, a rem, a canoe, an aid, a water, a minah, a yarak, an okay, a redan, a gala, a liza, a coir, a car, a vav, a hail, a guna, a min, an aroma, a mix, a manikin, a capita, a cap, a tsi, a waw, a spira, a rub, an att, a matsu, a hat, a fan, a taj, a ray, a jar, a lah, a datum, a gayal, a bus, a coss, an alias, a lin, a gata, a cabana, a nail, a nod, a vas, a lam, a recall, a nasal, a bat, an aba, a rec, a nim, a gauss, a baba, an ign, an agura, a gleba, a lune, a pastel, a yew, an inner, an exon, a moor, a mir, a pas, a dir, a canalis, a bason, a beg, a kop, a yam, a fader, a citer, a pan, a lunarian, a mot, an alif, a yes, a jaw, a pay, a salad, a poll, a waggon, an ore, an asp, a tabor, a cariama, a kab, a kabob, a lac, a deb, a mun, a dalasi, a daff, a raki, a halal, a sanies, a cast, a hwan, a cay, a dad, an ogam, a ma'am, a japan, a vakeel, a fac, a duel, a sial, a patin, a magot, a roll, a pain, a rall, a fats, a bap, a cerat, a call-up, an abb, a radiov, a gid, a loot, a god, a tenner, an eta, a gar, a grad, a dap, a dirt, a hair, a parr, an agon, a dual, a nonet, a mural, a soda, a teff, a tal, an omasum, a tug, a vat, a doom, a deil, a str, a dam, a gaff, a camoca, a mud, a flow, a fed, a gpm, a tod, a fcp, a reflet, a hay, a nav, a lulab, a tail, a maniac, an ikan, a maid, a salep, a lass, a pall, a gab, a watt, a bay, a map, a lair, a sax, a mar, a madam, a palet, a ramon, a won, a wet, a fen, a nipa, a dBm, a lai, a bag, a haeres, a bun, a ratton, a tana, a sem, a gtc, a giron, a bros, a navar, a carotin, a jab, a dayan, a lever, a fun, a macoma, an iter, a nies, a dak, a yaw, a sera, a tef, a nek, a xat, a boob, a haler, a cir, a daw, a camass, a topaz, a gator, a taw, a lapser, a mut, a biga, a nag, an atlas, a bad, a doodah, a manas, a puna, a fut, a sima, a gen, a facsim, a liard, a gym, a spot, a sex, a nae, a wap, a zax, a way, a tapis, an ord, a habu, a datura, a mel, a kadi, a qat, a mas, a banana, a cran, a bird, a pus, a drain, a lacer, a valor, a pav, a lad, a wamus, a garg, a tamis, a kaon, a tort, a leg, a baht, a lapin, a ref, a wall, a mac, a samaj, a boar, a sunn, a pappus, an aced, an ann, a manor, a barege, a jai, an alap, an acad, a fakeer, a remit, a get, a toil, a gat, a local, a baff, a wain, an akela, an uta, a slab, a rattan, a lyc, an atoll, a banian, a retem, a dorp, a poort, a vug, a supr, a canon, a far, a fanatic, a dep, a caid, a qaf, a kas, a carfax, a patness, a nabob, a catnip, a minima, a must, a sal, a caracara, a manioc, a til, a lip, a rag, an amir, a hareem, an arcs, a teel, a cram, a yawn, a main, a ban, a rasa, a lud, a ragi, a tapir, a top, a dil, a lat, a razz, a jag, a sass, a jalor, a calix, an asb, an ayre, a nap, a tannin, a garb, a sports, a gem, a reed, an esu, a hap, a raglan, a sis, a baronet, a snit, a madras, a plug, a gula, a ros, a scf, a gelder, a terr, a gag, a fay, a fag, a garret, a redleg, a fcs, a sora, a lug, a gulp, a sard, a matins, a tenor, a basis, an alg, a rap, a hausen, a deer, a meg, a strops, a brag, an inn, a tap, an aery, an abs, an axil, a carol, a jass, a sag, a jazz, a ratal, a lid, a pot, a rip, a taig, a radula, a saran, a bani, a manway, a marc, a leet, a scr, an ameer, a harim, an agar, a pil, a lit, a coin, a maar, a caracal, a satsuma, a minim, a pint, a cabob, an assent, a pax, a fracas, a kaf, a qadi, a caped, a cit, an afar, a fanon, a carpus, a guv, a troop, a prod, a meter, an ain, a ballot, an acyl, an attar, a balsa, a tuna, a lek, an ani, a waff, a bal, a colat, a galiot, a teg, a timer, a reek, a fad, a canap, a lanai, a jaeger, a baron, a mannan, a decan, a supp, a pannus, a raob, a jam, a sac, a mall, a wafer, a nip, a lath, a bagel, a trot, an oak, a sim, a tagrag, a sum, a wad, a lav, a parol, a varec, a laniard, a sup, a drib, an arca, an anabas, a mat, a qaid, a kalema, a rut, a daub, a hadron, a sip, a tay, a wax, a zap, a wae, an axes, a tops, a myg, a drail, a misc, a fanega, a mis, a tufa, an upas, an amah, a doodad, a basalt, a nagana, a gib, a tum, a resp, a law, a tarot, a gaz, a potass, a macaw, a daric, a rel, a haboob, a tax, a ken, a feta, a resaw, a yak, a dasein, a retina, a moc, a manuf, a revel, a nay, a dab, a janitor, a caravan, a sorb, an orig, a ctg, a mesa, a nat, an ottar, a nub, a sere, a hag, a bai, a lambda, a pin, a nef, a tew, a now, a nom, a ratel, a pam, a damar, a max, a sari, a lap, a may, a batt, a wab, a gall, a pass, a lapel, a sadi, a manakin, a cain, a mali, a tab, a lulav, an ayah, a telfer, a pcf, a dot, a mpg, a def, a wolf, a duma, a com, a caff, a gam, a darts, a lied, a mood, a tav, a gut, a mus, a monal, a taffeta, a dos-, a larum, a tenon, a laud, a nog, an arr, a pariah, a trid, a pad, a darg, a raga, a ten, a rennet, a dog, a tool, a dig, a void, a rabban, a pull, a cat, a recap, a bast, a fall, a rani, a pallor, a tog, a manit, a palais, a leud, a caf, a leek, a van, a pajama, a mam, a gonad, a day, a can, a what's, a casein, a salal, a haik, a raff, a dais, a ladanum, a bed, a cal, a bob, a kabaka, a mair, a carob, a taps, an aeron, a nogg, a wallop, a dal, a say', a paw, a jasey, a fil, an atom, an air, an ulan, a paretic, a red, a fam, a yapok, a geb, a nos, a basil, an acarid, a sap, a rim, a room, an oxen, a rennin, a wey, a let's, a paenula, a belga, a rug, an angina, a babassu, a gamin, a cera, a banat, a balas, an all, a ceramal, a sav, a don, a liana, an abaca, a tag, a nil, a sail, an assoc, a sub, a lay, a gamut, a dah, a lar, a jay, a raj, a tan, a fat, a haust, a matt, an abura, a ripsaw, a waist, a paca, a tip, a canikin, a maxima, a mor, an anima, an ugali, a hav, a var, a carioca, a zila, a lagan, a deray, a konak, a rayah, an imaret, a wadi, an aeon, a camera, a lab, a kal, a barabara, a cup, a reb, a sakai, a kami, a macron, an ordn, an atman, a bog, a bard, a kat, an unau, a tad, a monad, a jasy, a salet, a corban, a melamed, an anat, a panier, a pool, a papa, a gnat, a door, a pika, a goy, a krona, a kisan, a rub-a-dub, a pod, a guan, a roc, a dom, a tob, a rod, a tamara, a hall, a caesura, a pip, a duad, a tonk, a mug, a repp, an abl, an aet, a catnap, a dpt, a tuba, a nan, a boy, a proc, a leer, a ben, a trf, an apr, a tass, an assam, a guns, a cav, an amora, a loca, a fool, an egg, a latten, a coda, a pal, an amurca, a duc, a peek, a sun, an amal, a magic, an alfa, a tat, a yad, a cassaba, a gas, a dorm, a raid, a caress, a gal, a mahaleb, a tela, a mallam, a minaret, a gamer, a haw, a sabin, a hod, a tor, a reward, a ser, a prat, a bola, a ram, an amowt, a bael, a daemon, a burd, a leat, a lop, a tonn, an axel, a knar, a tram, a part, a saliva, a tar, a tom-tom, a grub, a kcal, an oil, a six, a yapp, an arg, an adit, a rex, a wallaba, a mob, a rev, a wanion, a galley, a melena, a clamor, a pig, a torr, a gaol, a haet, an enami, a simar, a stalag, an anime, a haem, a darer, a facial, a sinnet, a tola, a par, a caret, a dat, a waf, a radar, a decagram, a sop, a dew, a moot, a gals, a draw, an ips, a dag, a bots, a neep, a raw, a bul, a lager, a diol, a ham, a tarok, a noma, a plat, a camaca, a mola, a yap, a paal, an abac, a dart, a vela, a kona, a pup, a rep, a jak, an amanita, a marga, a nit, a panada, a malar, a baleen, a tell, a batik, a verb, an organa, a kalam, an atar, a kali, a rasp, a catena, a con, a tun, a wag, a redd, an areg, a jaap, an agnail, a dray, a barb, an aim, a natl, a mag, a lati, a baas, a canal, Panama!")
    
    
    

